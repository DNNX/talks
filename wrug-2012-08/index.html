<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>PStore: stdlibâ€™s Persistence</title>

  <meta name="viewport" content="width=device-width"/>

  <link rel="stylesheet" href="./css/reset.css" type="text/css"/>
  <link rel="stylesheet" href="./css/showoff.css" type="text/css"/>

  <script type="text/javascript" src="./js/jquery-1.4.2.min.js"></script>
  <script type="text/javascript" src="./js/jquery.cycle.all.js"></script>
	<script type="text/javascript" src="./js/jquery-print.js"></script>
  <script type="text/javascript" src="./js/jquery.batchImageLoad.js"></script>

  <script type="text/javascript" src="./js/jquery.doubletap-0.1.js"></script>

  <script type="text/javascript" src="./js/fg.menu.js"></script>
  <script type="text/javascript" src="./js/showoff.js"></script>
  <script type="text/javascript" src="./js/jTypeWriter.js"> </script>
  <script type="text/javascript" src="./js/sh_main.min.js"></script>
  <script type="text/javascript" src="./js/core.js"></script>
  <script type="text/javascript" src="./js/showoffcore.js"></script>
  <script type="text/javascript" src="./js/coffee-script.js"></script>

  <link type="text/css" href="./css/fg.menu.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/theme/ui.all.css" media="screen" rel="stylesheet" />
  <link type="text/css" href="./css/sh_style.css" rel="stylesheet" >

  
    <link rel="stylesheet" href="file/wrug-2012-08.css" type="text/css"/>
  

  

  <script type="text/javascript">
  $(function(){
      setupPreso(false, './');
  });
  </script>

</head>

<body>

<a tabindex="0" href="#search-engines" class="fg-button fg-button-icon-right ui-widget ui-state-default ui-corner-all" id="navmenu"><span class="ui-icon ui-icon-triangle-1-s"></span>slides</a>
<div id="navigation" class="hidden"></div>

<div id="help">
  <table>
    <tr><td class="key">z, ?</td><td>toggle help (this)</td></tr>
    <tr><td class="key">space, &rarr;</td><td>next slide</td></tr>
    <tr><td class="key">shift-space, &larr;</td><td>previous slide</td></tr>
    <tr><td class="key">d</td><td>toggle debug mode</td></tr>
    <tr><td class="key">## &lt;ret&gt;</td><td>go to slide #</td></tr>
    <tr><td class="key">c, t</td><td>table of contents (vi)</td></tr>
    <tr><td class="key">f</td><td>toggle footer</td></tr>
    <tr><td class="key">r</td><td>reload slides</td></tr>
    <tr><td class="key">n</td><td>toggle notes</td></tr>
    <tr><td class="key">p</td><td>run preshow</td></tr>
  </table>
</div>

<div class="buttonNav">
  <input type="submit" onClick="prevStep();" value="prev"/>
  <input type="submit" onClick="nextStep();" value="next"/>
</div>

<div id="preso">loading presentation...</div>
<div id="footer">
  <span id="slideInfo"></span>
  <span id="debugInfo"></span>
  <span id="notesInfo"></span>
</div>

<div id="slides" class="offscreen" style="display:none;">
<div class="slide" data-transition="none"><div class="content" ref="cover/cover">
<h1>PStore:</h1>

<h1>stdlib&#x2019;s Persistence</h1></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content bullets center incremental" ref="me-me-me/me-me-me/1">
<p><img src="./file/me-me-me/chastell.png" alt="chastell"/></p>

<h1>me, me, me.</h1>

<ul>
<li>(that&#x2019;s Piotr Szotkowski)</li>
<li>(or <a href="http://chastell.net">chastell</a>)</li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content center" ref="me-me-me/me-me-me/2">
<p><img src="./file/me-me-me/wut.png" alt="Warsaw University of Technology"/>
&#xA0;</p>

<h2>assistant professor</h2>

<h2>at <a href="http://eng.pw.edu.pl">Warsaw University of Technology</a></h2></div>
</div><div class="slide" data-transition="none"><div class="content center" ref="me-me-me/me-me-me/3">
<p><img src="./file/me-me-me/rebased.png" alt="Rebased"/>
&#xA0;</p>

<h2>cheap science officer</h2>

<h2>at <a href="http://rebased.pl">Rebased</a></h2></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content bullets incremental" ref="history/history/1">
<h1>1958</h1>

<ul>
<li><div class="quote">John McCarthy and Paul Graham invent LISP. Due to high costs caused by a post-war depletion of the strategic parentheses reserve LISP never becomes popular. In spite of its lack of popularity, LISP (now &#x2018;Lisp&#x2019; or sometimes &#x2018;Arc&#x2019;) remains an influential language in &#x2018;key algorithmic techniques such as recursion and condescension&#x2019;.<br/><br/>&#x2014; James Iry, <em><a href="http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html">A Brief, Incomplete, and Mostly Wrong History of Programming Languages</a></em></div></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="history/history/2">
<h1>1991</h1>

<ul>
<li><div class="quote">Dutch programmer Guido van Rossum travels to Argentina for a mysterious operation. He returns with a large cranial scar, invents Python, is declared Dictator for Life by legions of followers, and announces to the world that &#x2018;There Is Only One Way to Do It&#x2019;. Poland becomes nervous.<br/><br/><br/>&#x2014; James Iry, <em><a href="http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html">A Brief, Incomplete, and Mostly Wrong History of Programming Languages</a></em></div></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="history/history/3">
<h1>1995</h1>

<ul>
<li><div class="quote">Yukihiro &#x2018;Mad Matz&#x2019; Matsumoto creates Ruby to avert some vaguely unspecified apocalypse that will leave Australia a desert run by mohawked warriors and Tina Turner. The language is later renamed Ruby on Rails by its real inventor, David Heinemeier Hansson.<br/><br/><br/>&#x2014; James Iry, <em><a href="http://james-iry.blogspot.com/2009/05/brief-incomplete-and-mostly-wrong.html">A Brief, Incomplete, and Mostly Wrong History of Programming Languages</a></em></div></li>
</ul>
</div>
</div><div class="slide" data-transition="none"><div class="content bullets incremental" ref="history/history/4">
<h1>2009</h1>

<ul>
<li>&#x26AF;</li>
<li>&#x26AD;</li>
<li>honeymoon</li>
<li>&#x2665;</li>
<li><a href="https://github.com/chastell/signore">signore</a></li>
</ul>
</div>
</div><div class="slide" data-transition="scrollLeft"><div class="content bullets" ref="history/history/5">
<ul>
<li><div class="quote">
<code>/* obligatory Perl joke (omitted for brevity) */</code><br/><br/>
&#x2014; Tomasz Dubrownik</div></li>
</ul>
</div>
</div><div class="slide" data-transition="scrollLeft"><div class="content commandline incremental" ref="signore/signore/1">
<pre><code><code class="command">$ signore prego</code>
<code class="result">// sometimes I believe compiler ignores all my comments

</code><code class="command">$ signore prego Lisp</code>
<code class="result">Lisp: from the people who didn&#x2019;t bring you AI.

</code><code class="command">$ signore prego Python</code>
<code class="result">If I wanted just one way of doing things, I would
have joined the army, not get involved in computers.
                           [Abigail, hates-software]

</code><code class="command">$ signore prego Ruby</code>
<code class="result">Cloud is to datacenter what Ruby is to assembler.
                                   [DevOps Borat]
</code></code></pre></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content commandline incremental" ref="signore/signore/2">
<pre><code><code class="command">$ signore prego Python Ruby</code>
<code class="result">Python has three idiomatic ways to flatten a list, depending
on who you ask. Two are O(n&#xB2;). Ruby has one way. It&#x2019;s O(n).
                                            [Gary Bernhardt]

</code><code class="command">$ signore prego Python Ruby</code>
<code class="result">&#x2018;I swear, Ruby has more syntax for creating strings than Python has total.&#x2019;
&#x2018;"what" + %[are] + &lt;&lt;STR you STR + %q(talking) + 'about?'&#x2019;
                                             [Gary Bernhardt, Jeff Forcier]

</code><code class="command">$ signore prego Lisp ~Python Ruby</code>
<code class="result">I love Ruby&#x2019;s optional parentheses. Lisp doesn&#x2019;t have optional parentheses.
                                                               [Jamis Buck]
</code></code></pre></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content commandline incremental" ref="signore/signore/3">
<pre><code><code class="command">$ signore pronto Lisp</code>
<code class="result">text?
(What the world needs (I think) is not (a Lisp (with fewer parentheses))
but (an English (with more.)))

author?
Brian Hayes

source?
The Semicolon Wars

subject?


(What the world needs (I think) is not (a Lisp (with
fewer parentheses)) but (an English (with more.)))
                   [Brian Hayes, The Semicolon Wars]
</code></code></pre></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content" ref="signore/signore/4">
<h2>Mutt | Vim integration</h2>

<pre class="sh_vim"><code>map ,ss  G?^-- $&lt;CR&gt;&lt;Down&gt;dG:r! signore prego&lt;CR&gt;Go&lt;CR&gt;&lt;CR&gt;&lt;Esc&gt;


&#xA0;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="signore/signore/5">
<h2>Mutt | Vim integration</h2>

<pre class="sh_vim"><code>map ,ss  G?^-- $&lt;CR&gt;&lt;Down&gt;dG:r! signore prego&lt;CR&gt;Go&lt;CR&gt;&lt;CR&gt;&lt;Esc&gt;
map ,st  G?^-- $&lt;CR&gt;&lt;Down&gt;dG:r! signore prego tech&lt;CR&gt;Go&lt;CR&gt;&lt;CR&gt;&lt;Esc&gt;

&#xA0;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="signore/signore/6">
<h2>Mutt | Vim integration</h2>

<pre class="sh_vim"><code>map ,ss  G?^-- $&lt;CR&gt;&lt;Down&gt;dG:r! signore prego&lt;CR&gt;Go&lt;CR&gt;&lt;CR&gt;&lt;Esc&gt;
map ,st  G?^-- $&lt;CR&gt;&lt;Down&gt;dG:r! signore prego tech&lt;CR&gt;Go&lt;CR&gt;&lt;CR&gt;&lt;Esc&gt;
map ,se  G?^-- $&lt;CR&gt;&lt;Down&gt;dG:r! signore prego en&lt;CR&gt;Go&lt;CR&gt;&lt;CR&gt;&lt;Esc&gt;
&#xA0;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="signore/signore/7">
<h2>Mutt | Vim integration</h2>

<pre class="sh_vim"><code>map ,ss  G?^-- $&lt;CR&gt;&lt;Down&gt;dG:r! signore prego&lt;CR&gt;Go&lt;CR&gt;&lt;CR&gt;&lt;Esc&gt;
map ,st  G?^-- $&lt;CR&gt;&lt;Down&gt;dG:r! signore prego tech&lt;CR&gt;Go&lt;CR&gt;&lt;CR&gt;&lt;Esc&gt;
map ,se  G?^-- $&lt;CR&gt;&lt;Down&gt;dG:r! signore prego en&lt;CR&gt;Go&lt;CR&gt;&lt;CR&gt;&lt;Esc&gt;
map ,slp G?^-- $&lt;CR&gt;&lt;Down&gt;dG:r! signore prego pl ~tech&lt;CR&gt;Go&lt;CR&gt;&lt;CR&gt;&lt;Esc&gt;</code></pre></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content" ref="pstore/pstore/1">
<h1>PStore</h1>

<pre class="sh_ruby"><code># it&#x2019;s in the standard library
# and has Marshal and YAML backends

require 'yaml/store'
store = YAML::Store.new 'sigs.yml'</code></pre></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content" ref="pstore/pstore/2">
<pre class="sh_ruby"><code># sigs are author + text structures
Sig = Struct.new(:author, :text)













&#xA0;</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="pstore/pstore/3">
<pre class="sh_ruby"><code># sigs are author + text structures
Sig = Struct.new(:author, :text)

store.transaction do

  store['db'] ||= []









end</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="pstore/pstore/4">
<pre class="sh_ruby"><code># sigs are author + text structures
Sig = Struct.new(:author, :text)

store.transaction do

  store['db'] ||= []

  store['db'] &lt;&lt; Sig.new('Tim Pope',
    'I wonder if the guy that wrote BigDecimal#inspect has ' +
    'a tragic backstory that explains why he hates humanity.')





end</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content" ref="pstore/pstore/5">
<pre class="sh_ruby"><code># sigs are author + text structures
Sig = Struct.new(:author, :text)

store.transaction do   # a read/write transaction&#x2026;

  store['db'] ||= []

  store['db'] &lt;&lt; Sig.new('Tim Pope',
    'I wonder if the guy that wrote BigDecimal#inspect has ' +
    'a tragic backstory that explains why he hates humanity.')

  store['db'] &lt;&lt; Sig.new('P&#x430;ul B&#x430;ttley',
    'I&#x2019;d love to see an honest Ruby job ad. &#x2018;You will spend half ' +
    'your time running bundle install &amp; the other half facepalming.&#x2019;')

end                    # &#x2026;is atomically committed here</code></pre></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content" ref="pstore/pstore/6">
<pre class="sh_ruby"><code># read-only transactions can be concurrent
# and raise when you try to write anything

store.transaction(true) do

  store['db'].each do |sig|

    puts sig.text
    puts '-- ' + sig.author
    puts

  end

end</code></pre></div>
</div><div class="slide" data-transition="none"><div class="content commandline incremental" ref="pstore/pstore/7">
<pre><code><code class="command">$ ruby sigs.rb</code>
<code class="result">I wonder if the guy that wrote BigDecimal#inspect has
a tragic backstory that explains why he hates humanity.
-- Tim Pope

I&#x2019;d love to see an honest Ruby job ad. &#x2018;You will spend half
your time running bundle install &amp; the other half facepalming.&#x2019;
-- P&#x430;ul B&#x430;ttley

</code><code class="command">$ cat sigs.yml</code>
<code class="result">---
db:
- !ruby/struct:Sig
  author: Tim Pope
  text: I wonder if the guy that wrote BigDecimal#inspect
    has a tragic backstory that explains why he hates humanity.
- !ruby/struct:Sig
  author: P&#x430;ul B&#x430;ttley
  text: I&#x2019;d love to see an honest Ruby job ad. &#x2018;You will spend half
    your time running bundle install &amp; the other half facepalming.&#x2019;
</code></code></pre></div>
</div><div class="slide" data-transition="scrollLeft"><div class="content bullets" ref="links/links">
<h1>links</h1>

<ul>
<li><a href="https://github.com/chastell/signore">signore</a></li>
<li><a href="http://rubydoc.info/stdlib/pstore/PStore">PStore</a></li>
<li><a href="http://talks.chastell.net">talks.chastell.net</a></li>
</ul>
</div>
</div></div>

</body>
</html>
